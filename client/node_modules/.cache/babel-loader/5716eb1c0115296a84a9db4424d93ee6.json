{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./Navbar.css\";import searchIcon from\"./images/search-icon.png\";import cartIcon from\"./images/cart-icon.png\";import HelpModal from\"./HelpModal\";const Navbar=_ref=>{let{cart}=_ref;const[isLoggedIn,setIsLoggedIn]=useState(false);const[signInError,setSignInError]=useState(\"\");const[isHelpModalOpen,setHelpModalOpen]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[userProfile,setUserProfile]=useState(null);const[role,setRole]=useState('user');// Default to 'user'\nconst[showSignInForm,setShowSignInForm]=useState(false);const[showSignUpForm,setShowSignUpForm]=useState(false);useEffect(()=>{const checkAuthStatus=()=>{const user=localStorage.getItem('user');setIsLoggedIn(!!user);if(user){fetchUserProfile(user);}};checkAuthStatus();},[]);const fetchUserProfile=async email=>{try{const response=await fetch(`/api/profile?email=${email}`);if(response.ok){const profileData=await response.json();setUserProfile(profileData);setRole(profileData.role);// Set user role from profile data\n}}catch(error){console.error('Error fetching user profile:',error);}};const handleAuthButtonClick=()=>{if(isLoggedIn){localStorage.removeItem('user');setIsLoggedIn(false);setUserProfile(null);setRole('user');// Reset role on logout\nalert(\"Logged out successfully\");}else{setShowSignInForm(true);}};const handleSearchInputChange=e=>{setSearchTerm(e.target.value);};const handleSearch=async e=>{e.preventDefault();if(searchTerm.trim()===\"\")return;try{const response=await fetch(`/api/search_items?q=${searchTerm}`);const results=await response.json();setSearchResults(results);}catch(error){console.error(\"Error fetching search results:\",error);}};const handleSignIn=async event=>{event.preventDefault();const email=event.target.email.value;const password=event.target.password.value;try{const response=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});if(response.ok){const user=await response.json();localStorage.setItem('user',user.email);setIsLoggedIn(true);fetchUserProfile(user.email);alert(\"Sign In successful\");setShowSignInForm(false);setSignInError(\"\");}else{setSignInError(\"Invalid email or password. Please try again.\");}}catch(error){console.error('Error during sign-in:',error);setSignInError(\"An error occurred. Please try again later.\");}};const handleSignUp=async event=>{event.preventDefault();const name=event.target.name.value;const email=event.target.email.value;const password=event.target.password.value;const selectedRole=event.target.role.value;// Get selected role\ntry{const response=await fetch('/api/users');const users=await response.json();if(users.some(user=>user.email===email)){alert(\"Email already exists. Please sign in.\");setShowSignInForm(true);return;}const postResponse=await fetch('/api/users',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password,role:selectedRole})// Include selected role\n});if(postResponse.ok){alert(\"Account created successfully\");setShowSignInForm(true);}else{alert(\"Error creating account\");}}catch(error){console.error('Error during sign-up:',error);alert(\"An error occurred. Please try again later.\");}};const handleDeleteAccount=async()=>{const confirmDelete=window.confirm(\"Are you sure you want to delete your account? This action cannot be undone.\");if(!confirmDelete)return;try{const response=await fetch('/api/users/delete',{method:'DELETE',credentials:'include'// Ensure to send cookies if required\n});if(response.ok){localStorage.removeItem('user');setIsLoggedIn(false);setUserProfile(null);setRole('user');// Reset role on account deletion\nalert(\"Sad to see you leave! Account deleted successfully.\");}else{const errorData=await response.json();alert(`Error deleting account: ${errorData.error}`);}}catch(error){console.error('Error deleting account:',error);alert(\"An error occurred while deleting the account. Please try again later.\");}};const toggleHelpModal=()=>{setHelpModalOpen(!isHelpModalOpen);};const closeSignInForm=()=>setShowSignInForm(false);const closeSignUpForm=()=>setShowSignUpForm(false);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"shopsphere-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"shopsphere-header-left-section\"},/*#__PURE__*/React.createElement(\"h2\",null,\"SHOPSPHERE\")),/*#__PURE__*/React.createElement(\"div\",{className:\"shopsphere-header-middle-section\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSearch},/*#__PURE__*/React.createElement(\"input\",{className:\"search-bar\",type:\"text\",placeholder:\"Search\",value:searchTerm,onChange:handleSearchInputChange}),/*#__PURE__*/React.createElement(\"button\",{className:\"search-button\",type:\"submit\"},/*#__PURE__*/React.createElement(\"img\",{className:\"search-icon\",src:searchIcon,alt:\"Search Icon\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"shopsphere-header-right-section\"},/*#__PURE__*/React.createElement(\"a\",{className:\"cart-link\",href:\"checkout.html\"},/*#__PURE__*/React.createElement(\"img\",{className:\"cart-icon\",src:cartIcon,alt:\"Cart Icon\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-quantity\"},cart.length),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-text\"},\"Cart\")),/*#__PURE__*/React.createElement(\"button\",{className:\"signup-button\",onClick:handleAuthButtonClick},isLoggedIn?'Log Out':'Sign In'),isLoggedIn&&userProfile&&/*#__PURE__*/React.createElement(\"div\",{className:\"user-profile\"},/*#__PURE__*/React.createElement(\"span\",null,\"Welcome, \",userProfile.name,\"!\")),isLoggedIn&&role==='admin'&&/*#__PURE__*/// Check if the user is an admin\nReact.createElement(\"button\",{className:\"admin-button\"},\"Admin Panel\"),isLoggedIn&&/*#__PURE__*/React.createElement(\"button\",{className:\"delete-account-button\",onClick:handleDeleteAccount,style:{backgroundColor:'red',color:'white'}},\"Delete Account\"),/*#__PURE__*/React.createElement(\"button\",{className:\"help-button\",onClick:toggleHelpModal},\"Help\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"search-results\"},searchResults.length>0?/*#__PURE__*/React.createElement(\"ul\",null,searchResults.map(item=>/*#__PURE__*/React.createElement(\"li\",{key:item.id},item.item_name))):/*#__PURE__*/React.createElement(\"p\",null,\"No items match your search.\")),showSignInForm&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-container sign-in-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"button\",{className:\"close-button\",onClick:closeSignInForm},\"X\"),\" \",/*#__PURE__*/React.createElement(\"form\",{id:\"signInForm\",onSubmit:handleSignIn},/*#__PURE__*/React.createElement(\"h2\",null,\"Sign In\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"userEmail\"},\"Email:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"userPassword\"},\"Password:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",required:true})),signInError&&/*#__PURE__*/React.createElement(\"p\",{className:\"error-message\"},signInError),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Log In\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:()=>{setShowSignInForm(false);setShowSignUpForm(true);}},\"Sign Up\")))),showSignUpForm&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-container sign-up-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"button\",{className:\"close-button\",onClick:closeSignUpForm},\"X\"),\" \",/*#__PURE__*/React.createElement(\"form\",{id:\"signUpForm\",onSubmit:handleSignUp},/*#__PURE__*/React.createElement(\"h2\",null,\"Sign Up\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"userName\"},\"Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"userEmail\"},\"Email:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"userPassword\"},\"Password:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"userRole\"},\"Role:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"role\",value:role,onChange:e=>setRole(e.target.value),required:true},/*#__PURE__*/React.createElement(\"option\",{value:\"user\"},\"Regular User\"),/*#__PURE__*/React.createElement(\"option\",{value:\"admin\"},\"Admin User\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Sign Up\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:()=>{setShowSignUpForm(false);setShowSignInForm(true);}},\"Sign In\")))),isHelpModalOpen&&/*#__PURE__*/React.createElement(HelpModal,{onClose:toggleHelpModal}));};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","searchIcon","cartIcon","HelpModal","Navbar","_ref","cart","isLoggedIn","setIsLoggedIn","signInError","setSignInError","isHelpModalOpen","setHelpModalOpen","searchTerm","setSearchTerm","searchResults","setSearchResults","userProfile","setUserProfile","role","setRole","showSignInForm","setShowSignInForm","showSignUpForm","setShowSignUpForm","checkAuthStatus","user","localStorage","getItem","fetchUserProfile","email","response","fetch","ok","profileData","json","error","console","handleAuthButtonClick","removeItem","alert","handleSearchInputChange","e","target","value","handleSearch","preventDefault","trim","results","handleSignIn","event","password","method","headers","body","JSON","stringify","setItem","handleSignUp","name","selectedRole","users","some","postResponse","handleDeleteAccount","confirmDelete","window","confirm","credentials","errorData","toggleHelpModal","closeSignInForm","closeSignUpForm","createElement","Fragment","className","onSubmit","type","placeholder","onChange","src","alt","href","length","onClick","style","backgroundColor","color","map","item","key","id","item_name","htmlFor","required","onClose"],"sources":["/home/philip-osir/Desktop/GroupThree_FrontandBack/Group-3-end-Phase_2-Project-/shopsphere_e_commerce_website/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"; \nimport \"./Navbar.css\";\nimport searchIcon from \"./images/search-icon.png\";\nimport cartIcon from \"./images/cart-icon.png\";\nimport HelpModal from \"./HelpModal\";\n\nconst Navbar = ({ cart }) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [signInError, setSignInError] = useState(\"\");\n  const [isHelpModalOpen, setHelpModalOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [userProfile, setUserProfile] = useState(null);\n  const [role, setRole] = useState('user'); // Default to 'user'\n  const [showSignInForm, setShowSignInForm] = useState(false);\n  const [showSignUpForm, setShowSignUpForm] = useState(false);\n\n  useEffect(() => {\n    const checkAuthStatus = () => {\n      const user = localStorage.getItem('user');\n      setIsLoggedIn(!!user);\n      if (user) {\n        fetchUserProfile(user);\n      }\n    };\n\n    checkAuthStatus();\n  }, []);\n\n  const fetchUserProfile = async (email) => {\n    try {\n      const response = await fetch(`/api/profile?email=${email}`);\n      if (response.ok) {\n        const profileData = await response.json();\n        setUserProfile(profileData);\n        setRole(profileData.role); // Set user role from profile data\n      }\n    } catch (error) {\n      console.error('Error fetching user profile:', error);\n    }\n  };\n\n  const handleAuthButtonClick = () => {\n    if (isLoggedIn) {\n      localStorage.removeItem('user');\n      setIsLoggedIn(false);\n      setUserProfile(null);\n      setRole('user'); // Reset role on logout\n      alert(\"Logged out successfully\");\n    } else {\n      setShowSignInForm(true);\n    }\n  };\n\n  const handleSearchInputChange = (e) => {\n    setSearchTerm(e.target.value);\n  };\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (searchTerm.trim() === \"\") return;\n\n    try {\n      const response = await fetch(`/api/search_items?q=${searchTerm}`);\n      const results = await response.json();\n      setSearchResults(results);\n    } catch (error) {\n      console.error(\"Error fetching search results:\", error);\n    }\n  };\n\n  const handleSignIn = async (event) => {\n    event.preventDefault();\n    const email = event.target.email.value;\n    const password = event.target.password.value;\n\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (response.ok) {\n        const user = await response.json();\n        localStorage.setItem('user', user.email);\n        setIsLoggedIn(true);\n        fetchUserProfile(user.email);\n        alert(\"Sign In successful\");\n        setShowSignInForm(false);\n        setSignInError(\"\");\n      } else {\n        setSignInError(\"Invalid email or password. Please try again.\");\n      }\n    } catch (error) {\n      console.error('Error during sign-in:', error);\n      setSignInError(\"An error occurred. Please try again later.\");\n    }\n  };\n\n  const handleSignUp = async (event) => {\n    event.preventDefault();\n    const name = event.target.name.value;\n    const email = event.target.email.value;\n    const password = event.target.password.value;\n    const selectedRole = event.target.role.value; // Get selected role\n\n    try {\n      const response = await fetch('/api/users');\n      const users = await response.json();\n\n      if (users.some(user => user.email === email)) {\n        alert(\"Email already exists. Please sign in.\");\n        setShowSignInForm(true);\n        return;\n      }\n\n      const postResponse = await fetch('/api/users', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ name, email, password, role: selectedRole }), // Include selected role\n      });\n\n      if (postResponse.ok) {\n        alert(\"Account created successfully\");\n        setShowSignInForm(true);\n      } else {\n        alert(\"Error creating account\");\n      }\n    } catch (error) {\n      console.error('Error during sign-up:', error);\n      alert(\"An error occurred. Please try again later.\");\n    }\n  };\n\n  const handleDeleteAccount = async () => {\n    const confirmDelete = window.confirm(\"Are you sure you want to delete your account? This action cannot be undone.\");\n    if (!confirmDelete) return;\n\n    try {\n      const response = await fetch('/api/users/delete', {\n        method: 'DELETE',\n        credentials: 'include' // Ensure to send cookies if required\n      });\n\n      if (response.ok) {\n        localStorage.removeItem('user');\n        setIsLoggedIn(false);\n        setUserProfile(null);\n        setRole('user'); // Reset role on account deletion\n        alert(\"Sad to see you leave! Account deleted successfully.\");\n      } else {\n        const errorData = await response.json();\n        alert(`Error deleting account: ${errorData.error}`);\n      }\n    } catch (error) {\n      console.error('Error deleting account:', error);\n      alert(\"An error occurred while deleting the account. Please try again later.\");\n    }\n  };\n\n  const toggleHelpModal = () => {\n    setHelpModalOpen(!isHelpModalOpen);\n  };\n\n  const closeSignInForm = () => setShowSignInForm(false);\n  const closeSignUpForm = () => setShowSignUpForm(false);\n\n  return (\n    <>\n      <div className=\"shopsphere-header\">\n        <div className=\"shopsphere-header-left-section\">\n          <h2>SHOPSPHERE</h2>\n        </div>\n\n        <div className=\"shopsphere-header-middle-section\">\n          <form onSubmit={handleSearch}>\n            <input className=\"search-bar\" type=\"text\" placeholder=\"Search\" value={searchTerm} onChange={handleSearchInputChange} />\n            {/* <input className=\"search-bar\" type=\"text\" placeholder=\"Search\" value={searchTerm} onChange={handleSearchInputChange} style={{ width: '150px' }} /> */}\n            <button className=\"search-button\" type=\"submit\">\n              <img className=\"search-icon\" src={searchIcon} alt=\"Search Icon\" />\n            </button>\n          </form>\n        </div>\n\n        <div className=\"shopsphere-header-right-section\">\n          <a className=\"cart-link\" href=\"checkout.html\">\n            <img className=\"cart-icon\" src={cartIcon} alt=\"Cart Icon\" />\n            <div className=\"cart-quantity\">{cart.length}</div>\n            <div className=\"cart-text\">Cart</div>\n          </a>\n\n          <button className=\"signup-button\" onClick={handleAuthButtonClick}>\n            {isLoggedIn ? 'Log Out' : 'Sign In'}\n          </button>\n\n          {isLoggedIn && userProfile && (\n            <div className=\"user-profile\">\n              <span>Welcome, {userProfile.name}!</span>\n            </div>\n          )}\n\n          {isLoggedIn && role === 'admin' && ( // Check if the user is an admin\n            <button className=\"admin-button\">\n              Admin Panel\n            </button>\n          )}\n\n          {isLoggedIn && (\n            <button className=\"delete-account-button\" onClick={handleDeleteAccount} style={{ backgroundColor: 'red', color: 'white' }}>\n              Delete Account\n            </button>\n          )}\n\n          <button className=\"help-button\" onClick={toggleHelpModal}>\n            Help\n          </button>\n        </div>\n      </div>\n\n      <div className=\"search-results\">\n        {searchResults.length > 0 ? (\n          <ul>\n            {searchResults.map(item => (\n              <li key={item.id}>{item.item_name}</li>\n            ))}\n          </ul>\n        ) : (\n          <p>No items match your search.</p>\n        )}\n      </div>\n\n      {showSignInForm && (\n        <div className=\"form-container sign-in-form\">\n          <div className=\"form\">\n            <button className=\"close-button\" onClick={closeSignInForm}>X</button> {/* Close button */}\n            <form id=\"signInForm\" onSubmit={handleSignIn}>\n              <h2>Sign In</h2>\n              <div className=\"form-group\">\n                <label htmlFor=\"userEmail\">Email:</label>\n                <input type=\"email\" name=\"email\" required />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"userPassword\">Password:</label>\n                <input type=\"password\" name=\"password\" required />\n              </div>\n              {signInError && <p className=\"error-message\">{signInError}</p>}\n              <button type=\"submit\">Log In</button>\n              <button type=\"button\" onClick={() => { setShowSignInForm(false); setShowSignUpForm(true); }}>Sign Up</button>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {showSignUpForm && (\n        <div className=\"form-container sign-up-form\">\n          <div className=\"form\">\n            <button className=\"close-button\" onClick={closeSignUpForm}>X</button> {/* Close button */}\n            <form id=\"signUpForm\" onSubmit={handleSignUp}>\n              <h2>Sign Up</h2>\n              <div className=\"form-group\">\n                <label htmlFor=\"userName\">Name:</label>\n                <input type=\"text\" name=\"name\" required />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"userEmail\">Email:</label>\n                <input type=\"email\" name=\"email\" required />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"userPassword\">Password:</label>\n                <input type=\"password\" name=\"password\" required />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"userRole\">Role:</label>\n                <select name=\"role\" value={role} onChange={(e) => setRole(e.target.value)} required>\n                  <option value=\"user\">Regular User</option>\n                  <option value=\"admin\">Admin User</option>\n                </select>\n              </div>\n              <button type=\"submit\">Sign Up</button>\n              <button type=\"button\" onClick={() => { setShowSignUpForm(false); setShowSignInForm(true); }}>Sign In</button>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {isHelpModalOpen && <HelpModal onClose={toggleHelpModal} />}\n    </>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}