{"ast":null,"code":"var _jsxFileName = \"/home/caleb-k/Moringa-Development/Code/Projects/Shopsphere-fullstack/client/src/components/Navbar.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./Navbar.css\";\nimport searchIcon from \"./images/search-icon.png\";\nimport cartIcon from \"./images/cart-icon.png\";\nimport HelpModal from \"./HelpModal\";\nconst Navbar = ({\n  cart,\n  setCart\n}) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [signInError, setSignInError] = useState(\"\");\n  const [isHelpModalOpen, setHelpModalOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [userProfile, setUserProfile] = useState(null);\n  const [role, setRole] = useState('user');\n  const [showSignInForm, setShowSignInForm] = useState(false);\n  useEffect(() => {\n    const checkAuthStatus = () => {\n      const user = localStorage.getItem('user');\n      setIsLoggedIn(!!user);\n      if (user) {\n        fetchUserProfile(user);\n      }\n    };\n    checkAuthStatus();\n  }, []);\n  const fetchUserProfile = async email => {\n    try {\n      const response = await fetch(`/api/profile?email=${email}`);\n      if (response.ok) {\n        const profileData = await response.json();\n        setUserProfile(profileData);\n        setRole(profileData.role);\n      }\n    } catch (error) {\n      console.error('Error fetching user profile:', error);\n    }\n  };\n  const handleAuthButtonClick = () => {\n    if (isLoggedIn) {\n      localStorage.removeItem('user');\n      setIsLoggedIn(false);\n      setUserProfile(null);\n      setRole('user');\n      alert(\"Logged out successfully\");\n    } else {\n      setShowSignInForm(true); // Show sign-in form\n    }\n  };\n  const handleSearchInputChange = e => {\n    setSearchTerm(e.target.value);\n  };\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (searchTerm.trim() === \"\") return;\n    try {\n      const response = await fetch(`/api/search_items?q=${searchTerm}`);\n      const results = await response.json();\n      setSearchResults(results);\n    } catch (error) {\n      console.error(\"Error fetching search results:\", error);\n    }\n  };\n  const handleSignIn = async event => {\n    event.preventDefault();\n    const email = event.target.email.value;\n    const password = event.target.password.value;\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (response.ok) {\n        const user = await response.json();\n        localStorage.setItem('user', user.email);\n        setIsLoggedIn(true);\n        fetchUserProfile(user.email);\n        alert(\"Sign In successful\");\n        setShowSignInForm(false);\n        setSignInError(\"\");\n      } else {\n        setSignInError(\"Invalid email or password. Please try again.\");\n      }\n    } catch (error) {\n      console.error('Error during sign-in:', error);\n      setSignInError(\"An error occurred. Please try again later.\");\n    }\n  };\n  const handleDeleteAccount = async () => {\n    if (window.confirm(\"Are you sure you want to delete your account? This action cannot be undone.\")) {\n      try {\n        const response = await fetch('/api/delete_account', {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: userProfile.email\n          })\n        });\n        if (response.ok) {\n          alert(\"Account deleted successfully.\");\n          localStorage.removeItem('user');\n          setIsLoggedIn(false);\n          setUserProfile(null);\n          setRole('user');\n        } else {\n          alert(\"Failed to delete account. Please try again later.\");\n        }\n      } catch (error) {\n        console.error('Error deleting account:', error);\n        alert(\"An error occurred while trying to delete your account.\");\n      }\n    }\n  };\n  const toggleHelpModal = () => {\n    setHelpModalOpen(!isHelpModalOpen);\n  };\n  const addToCart = (itemId, quantity) => {\n    const newCart = [...cart, {\n      id: itemId,\n      quantity\n    }];\n    setCart(newCart);\n  };\n  const viewCart = () => {\n    alert(\"Viewing cart\");\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shopsphere-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shopsphere-header-left-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"SHOPSPHERE\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shopsphere-header-middle-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"search-bar\",\n    type: \"text\",\n    placeholder: \"Search\",\n    value: searchTerm,\n    onChange: handleSearchInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"search-button\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"search-icon\",\n    src: searchIcon,\n    alt: \"Search Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shopsphere-header-right-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cart-link\",\n    onClick: viewCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"cart-icon\",\n    src: cartIcon,\n    alt: \"Cart Icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-quantity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, cart.length), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Cart\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"signup-button\",\n    onClick: handleAuthButtonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, isLoggedIn ? 'Log Out' : 'Sign In'), isLoggedIn && userProfile && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"Welcome, \", userProfile.name, \"!\")), isLoggedIn && role === 'admin' && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"admin-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, \"Admin Panel\"), isLoggedIn && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete-account-button\",\n    onClick: handleDeleteAccount,\n    style: {\n      backgroundColor: 'red',\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, \"Delete Account\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"help-button\",\n    onClick: toggleHelpModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, \"Help\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, searchResults.length > 0 ? /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, searchResults.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, item.item_name, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => addToCart(item.id, 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, \"Add to Cart\")))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, \"No items match your search.\")), showSignInForm && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sign-in-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"signin-form\",\n    onSubmit: handleSignIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signin-form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, \"Sign In/Sign up\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => setShowSignInForm(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, \"x\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Email\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, \"Sign In\"), signInError && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 29\n    }\n  }, signInError))), isHelpModalOpen && /*#__PURE__*/React.createElement(HelpModal, {\n    onClose: toggleHelpModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 27\n    }\n  }));\n};\nexport default Navbar;","map":{"version":3,"names":["React","useState","useEffect","searchIcon","cartIcon","HelpModal","Navbar","cart","setCart","isLoggedIn","setIsLoggedIn","signInError","setSignInError","isHelpModalOpen","setHelpModalOpen","searchTerm","setSearchTerm","searchResults","setSearchResults","userProfile","setUserProfile","role","setRole","showSignInForm","setShowSignInForm","checkAuthStatus","user","localStorage","getItem","fetchUserProfile","email","response","fetch","ok","profileData","json","error","console","handleAuthButtonClick","removeItem","alert","handleSearchInputChange","e","target","value","handleSearch","preventDefault","trim","results","handleSignIn","event","password","method","headers","body","JSON","stringify","setItem","handleDeleteAccount","window","confirm","toggleHelpModal","addToCart","itemId","quantity","newCart","id","viewCart","createElement","Fragment","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","src","alt","onClick","length","name","style","backgroundColor","color","map","item","key","item_name","required","onClose"],"sources":["/home/caleb-k/Moringa-Development/Code/Projects/Shopsphere-fullstack/client/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"; \nimport \"./Navbar.css\";\nimport searchIcon from \"./images/search-icon.png\";\nimport cartIcon from \"./images/cart-icon.png\";\nimport HelpModal from \"./HelpModal\";\n\nconst Navbar = ({ cart, setCart }) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [signInError, setSignInError] = useState(\"\");\n  const [isHelpModalOpen, setHelpModalOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [userProfile, setUserProfile] = useState(null);\n  const [role, setRole] = useState('user');\n  const [showSignInForm, setShowSignInForm] = useState(false);\n\n  useEffect(() => {\n    const checkAuthStatus = () => {\n      const user = localStorage.getItem('user');\n      setIsLoggedIn(!!user);\n      if (user) {\n        fetchUserProfile(user);\n      }\n    };\n    checkAuthStatus();\n  }, []);\n\n  const fetchUserProfile = async (email) => {\n    try {\n      const response = await fetch(`/api/profile?email=${email}`);\n      if (response.ok) {\n        const profileData = await response.json();\n        setUserProfile(profileData);\n        setRole(profileData.role);\n      }\n    } catch (error) {\n      console.error('Error fetching user profile:', error);\n    }\n  };\n\n  const handleAuthButtonClick = () => {\n    if (isLoggedIn) {\n      localStorage.removeItem('user');\n      setIsLoggedIn(false);\n      setUserProfile(null);\n      setRole('user');\n      alert(\"Logged out successfully\");\n    } else {\n      setShowSignInForm(true);  // Show sign-in form\n    }\n  };\n\n  const handleSearchInputChange = (e) => {\n    setSearchTerm(e.target.value);\n  };\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (searchTerm.trim() === \"\") return;\n\n    try {\n      const response = await fetch(`/api/search_items?q=${searchTerm}`);\n      const results = await response.json();\n      setSearchResults(results);\n    } catch (error) {\n      console.error(\"Error fetching search results:\", error);\n    }\n  };\n\n  const handleSignIn = async (event) => {\n    event.preventDefault();\n    const email = event.target.email.value;\n    const password = event.target.password.value;\n\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password }),\n      });\n\n      if (response.ok) {\n        const user = await response.json();\n        localStorage.setItem('user', user.email);\n        setIsLoggedIn(true);\n        fetchUserProfile(user.email);\n        alert(\"Sign In successful\");\n        setShowSignInForm(false);\n        setSignInError(\"\");\n      } else {\n        setSignInError(\"Invalid email or password. Please try again.\");\n      }\n    } catch (error) {\n      console.error('Error during sign-in:', error);\n      setSignInError(\"An error occurred. Please try again later.\");\n    }\n  };\n\n  const handleDeleteAccount = async () => {\n    if (window.confirm(\"Are you sure you want to delete your account? This action cannot be undone.\")) {\n      try {\n        const response = await fetch('/api/delete_account', {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email: userProfile.email }),\n        });\n\n        if (response.ok) {\n          alert(\"Account deleted successfully.\");\n          localStorage.removeItem('user');\n          setIsLoggedIn(false);\n          setUserProfile(null);\n          setRole('user');\n        } else {\n          alert(\"Failed to delete account. Please try again later.\");\n        }\n      } catch (error) {\n        console.error('Error deleting account:', error);\n        alert(\"An error occurred while trying to delete your account.\");\n      }\n    }\n  };\n\n  const toggleHelpModal = () => {\n    setHelpModalOpen(!isHelpModalOpen);\n  };\n\n  const addToCart = (itemId, quantity) => {\n    const newCart = [...cart, { id: itemId, quantity }];\n    setCart(newCart);\n  };\n\n  const viewCart = () => {\n    alert(\"Viewing cart\");\n  };\n\n  return (\n    <>\n      <div className=\"shopsphere-header\">\n        <div className=\"shopsphere-header-left-section\">\n          <h2>SHOPSPHERE</h2>\n        </div>\n\n        <div className=\"shopsphere-header-middle-section\">\n          <form onSubmit={handleSearch}>\n            <input className=\"search-bar\" type=\"text\" placeholder=\"Search\" value={searchTerm} onChange={handleSearchInputChange} />\n            <button className=\"search-button\" type=\"submit\">\n              <img className=\"search-icon\" src={searchIcon} alt=\"Search Icon\" />\n            </button>\n          </form>\n        </div>\n\n        <div className=\"shopsphere-header-right-section\">\n          <button className=\"cart-link\" onClick={viewCart}>\n            <img className=\"cart-icon\" src={cartIcon} alt=\"Cart Icon\" />\n            <div className=\"cart-quantity\">{cart.length}</div>\n            <div className=\"cart-text\">Cart</div>\n          </button>\n\n          <button className=\"signup-button\" onClick={handleAuthButtonClick}>\n            {isLoggedIn ? 'Log Out' : 'Sign In'}\n          </button>\n\n          {isLoggedIn && userProfile && (\n            <div className=\"user-profile\">\n              <span>Welcome, {userProfile.name}!</span>\n            </div>\n          )}\n\n          {isLoggedIn && role === 'admin' && (\n            <button className=\"admin-button\">Admin Panel</button>\n          )}\n\n          {isLoggedIn && (\n            <button className=\"delete-account-button\" onClick={handleDeleteAccount} style={{ backgroundColor: 'red', color: 'white' }}>\n              Delete Account\n            </button>\n          )}\n\n          <button className=\"help-button\" onClick={toggleHelpModal}>\n            Help\n          </button>\n        </div>\n      </div>\n\n      <div className=\"search-results\">\n        {searchResults.length > 0 ? (\n          <ul>\n            {searchResults.map(item => (\n              <li key={item.id}>\n                {item.item_name}\n                <button onClick={() => addToCart(item.id, 1)}>Add to Cart</button>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <p>No items match your search.</p>\n        )}\n      </div>\n\n      {/* Conditional rendering for sign-in form */}\n      {showSignInForm && (\n        <div className=\"sign-in-modal\">\n          <form className=\"signin-form\" onSubmit={handleSignIn}>\n            <div className=\"signin-form-header\">\n              <h3>Sign In/Sign up</h3>\n              <button type=\"button\" onClick={() => setShowSignInForm(false)}>x</button>\n            </div>\n            <input type=\"email\" name=\"email\" placeholder=\"Email\" required />\n            <input type=\"password\" name=\"password\" placeholder=\"Password\" required />\n            <button type=\"submit\">Sign In</button>\n            {signInError && <p className=\"error\">{signInError}</p>}\n            \n          </form>\n        </div>\n      )}\n\n      {/* Conditional rendering for help modal */}\n      {isHelpModalOpen && <HelpModal onClose={toggleHelpModal} />}\n    </>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}